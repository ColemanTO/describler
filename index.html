<doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Describler</title>
  <link rel="shortcut icon" href="favicon.ico">
  <style> 
    @font-face {
      font-family: "Galberik";
      src: url("assets/Galberik.eot");
      src: local("☺"), 
        url("assets/Galberik.woff") format("woff"), 
        url("assets/Galberik.ttf") format("truetype"), 
        url("assets/Galberik.svg") format("svg");
      font-weight: normal;
      font-style: normal;
    }
    
    @font-face {
      font-family: "Overlock";
      src: url("assets/Overlock.eot");
      src: local("☺"), 
        url("assets/Overlock.woff") format("woff"), 
        url("assets/Overlock.ttf") format("truetype"), 
        url("assets/Overlock.svg") format("svg");
      font-weight: normal;
      font-style: normal;
    }    

    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: Calibri, Verdana, sans-serif;
    }

    h1 {
      font-family: "Galberik", cursive;      
      font-style: italic;
      font-weight: bold;
      text-transform: lowercase;
      font-size: 1.5em;
      color: whitesmoke;
      margin: 2px 0em 10px 0em;
    }

    h2 {
      font-size: 1.25em;
      color: dimgray;      
    }

    section#app {
      background: #303030;
      background-image: url(assets/tweed.png);
      font-size: 18px;
      padding: 0.1em 1em 2em 1em;
    }

    section#content {
      background: whitesmoke;
      background-image: url(assets/pixel_weave.png);
      border-radius: 3px;
      box-shadow: inset 0 0 10px #333;
      padding: 0.5em;
      margin: 0;
      /*padding: 0;*/
    }

    section#controls {
      float: left;
      width: 20%;
/*      margin: 0 1em 0 0;
      padding: 0;
      margin: 0 !important;*/
    }

    main#display-area {
      margin-left: 20%;
      height: 89%;
      overflow-y: auto;
      padding: 0em 2em 0em 1em;
    }

    section#lightboxes {
      display: none;
    }

    .upload {
      position: relative;
      cursor: pointer;
    }

      .upload input {
        position: absolute;
        top: 0;
        right: 0;
        font-size: 1em;
        opacity: 0;
        cursor: pointer;
        width: 14em;
      }

      select {
        width: 14em;
        padding: 0.25em;
        height: 2em;      
        border-radius: 10em;     
      }

    .button, button {
      font-family: "icomoon", "Overlock", sans-serif;
      font-size: 1em;
      display: inline-block;
      margin: 0.15em;
      outline: none;
      cursor: pointer;
      text-align: center;
      text-decoration: none;
      padding: .5em 2em .3em;
      text-shadow: 0 1px 1px rgba(0,0,0,.3);
      box-shadow: 0 1px 2px rgba(0,0,0,.2);
      border: solid 1px #da7c0c;
      border-radius: 8px;
    }

    .button > span, button > span {
      margin-left: 0.5em;
    }

    .button:hover {
      text-decoration: none;
    }

    .button:active {
      position: relative;
      top: 1px;
    }

      button#next_button, button#previous_button {
        width: 2em;
        height: 2em;
        /*margin: 0;*/
        padding: 0;
      }

      button#next_button span, button#previous_button span {
        visibility: hidden;
        /*font-size: 0.1em;*/
      }

        button#next_button:before {
          padding-left: 0.5em;
          content: "▶";
        }

        button#previous_button:before {
          padding-left: 0.5em;
          content: "◀";
        }

    textarea#details {
      font-size: 0.8em;
      width: 100%;
      height: 15em;
      resize: none;
      overflow: auto;
      border: 2px solid #765942;
      border-radius: 5px;
    }

    .upload {
      color: #fef4e9;
      border: solid 1px #da7c0c;
      background: hsl(31, 93%, 54%); /* Old browsers */
      background: linear-gradient(top, #faa51a 35%, #f47a20 100%)
    }
      
      .upload:hover {
        background: #f47c20;
        background: linear-gradient(top, #f88e11 35%, #f06015 100%)
      }
      
      .upload:active {
        color: #fcd3a5;
        background: linear-gradient(top, #f47a20 35%, #faa51a 100%)
      }

    .download {
      color: hsl(284, 65%, 91%);
      border: solid 1px hsl(283, 100%, 32%);
      background: hsl(282, 100%, 40%); /* Old browsers */
      background: linear-gradient(top, hsl(282, 100%, 47%) 35%, hsl(282, 100%, 32%) 100%)
    }      
     
      .download:hover {
        background: hsl(282, 100%, 34%);
        background: linear-gradient(top, hsl(282, 100%, 40%) 35%, hsl(282, 100%, 28%) 100%)
      }
      
      .download:active {
        color: hsl(282, 100%, 47%);
        background: linear-gradient(top, hsl(282, 100%, 32%) 35%, hsl(282, 100%, 47%) 100%)
      }      


    section#info {
      margin: 0.25em;
      padding: 0.5em;
      width: 13em;
      border-radius: 8px;
      color: whitesmoke;
      background-color: #303030;
      background-image: url(assets/tweed.png);
      box-shadow: 3px 3px 5px 6px #ccc;
    }  
      
      output {
        font-style: italic;
      }

        output#file-name {
          display: block;        
        }

        output#file-name, output#filesize, output#new-filesize {
          
        }

        output#filesize, output#new-filesize {
          display: none;
        }

    #download-button {
      display: none;
    }    



    .tab-view {
      display: none;
    }

      .tab-view:target {
        display: block;
      }

    #code > code {
/*      
      width: 70%;
      height: 90%;
*/      
      display: inline-block;
      color: gainsboro;
      background-color: black;
      border: 2px solid hsla(0, 0%, 25%, 1.0);
      overflow-y: auto;
      white-space: pre-wrap;
      padding: 1em 2em;
    }
   

    .tabs { 
      list-style: none; 
      position: absolute;
      top: 0;
      left: 20%;
    }
      
      .tabs li { 
        display: inline; 
      }
      
      .tabs li a { 
        color: whitesmoke; 
        background: gray;
        float: left; 
        display: block; 
        padding: 4px 10px; 
        margin-left: -1px; 
        position: relative; 
        left: 1px; 
        text-decoration: none; 
      }
      
      .tabs li a:hover { 
        background: #ccc; 
        background-image: url(assets/pixel_weave.png);
        color: black;
      }
      
      .tabs li a:active { 
        background: white; 
      }
/*      
      .tabs:after { 
        visibility: hidden; 
        display: block; 
        font-size: 0; 
        content: " "; 
        clear: both; 
        height: 0; 
      }

*/  
  
    /*
    //  edit list view
    */
    .tree-view {
      /*padding: 0em 2em 0em 1em;*/
      font-family: "Overlock", sans-serif;
      font-size: 18px;
    }
  
    .tree-view > p:first-of-type > strong {
      font-style: italic;
      font-weight: normal;
      font-size: 1.5em;
      margin-left: -0.75em;
    }


    .tree-view ul {
      padding-left: 1em;
    }
    
      .tree-view ul li {
        font-family: "Overlock", sans-serif;
        font-size: 18px;
        margin-bottom: 0.4em;
        margin-top: 0.4em;
        list-style-type: none;
      }
    
      .tree-view ul li span {
        /*     box-shadow: 1px 1px 3px 3px #ccc;*/
      }
    
    .tree-view span.namespaced {
      font-size: 14px;
      background-color: gray;
      border-radius: 0.7em;
    }
    
    .tree-view span.graphics, 
    .tree-view span.metadata, 
    .tree-view span.namespaced,
    .tree-view span.misc,
    .tree-view span.add-title,
    .tree-view span.add-desc {
      color: whitesmoke;
      padding: 0.08em 0.5em 0.2em 0.5em;
      /*     vertical-align: top;*/
    }
    
      .tree-view span.graphics {
        background-color: hsl(197, 100%, 32%);
        border-radius: 0.7em;
      }
  
      .tree-view span.misc {
/*        background-color: hsl(290, 70%, 50%);*/
        background-color: hsl(31, 93%, 54%);
        border-radius: 0.7em;
      }
    
      .tree-view span.metadata {
        background-color: hsl(85, 76%, 29%);
        border-radius: 0.7em 0em 0em 0.7em;
        padding: 0.08em 0.5em 0.2em 0.5em;
      }
      
      .tree-view span.add-title,
      .tree-view span.add-desc {
        font-size: 15px;
        background-color: hsl(282, 100%, 40%);
        border-radius: 0.7em;
        margin-left: 0.5em;
        padding-left: 0.em;
        font-weight: bold;
        cursor: pointer;
        white-space: nowrap;
      }

    .tree-view span.att {
      background-color: gray;
      color: black;
      margin-left: 0.5em;
      padding: 0em 0.3em 0.05em 0.3em;
      font-style: italic;
      font-size: 16px;
      border-radius: 0.4em;
    }
    
      .tree-view span.graphics span.att {
        background-color: hsl(197, 100%, 55%);
      }
    
      .tree-view span.metadata span.att {
        background-color: hsl(85, 76%, 55%);
        margin-right: -0.25em;
      }
  
      .tree-view span.misc span.att {
        background-color: hsl(31, 93%, 74%);
        margin-right: -0.25em;
      }

    .tree-view span.textvalue {
      background-color: gainsboro;
      background-color: white;
      border-radius: 0em 0.7em 0.7em 0em;
      padding: 0.08em 0.7em 0.2em 0.5em;
      max-width: 500px;
      display: inline-block;
      vertical-align: top;
      margin-top: -0.05em;
      min-height: 1.2em;
    }
    


  </style>
	
	<script src="describler.js"> </script>
  <script defer>
    window.onload = function () {
      var app = new appObj();
    }

    // window.onload = new appObj();
    // var app = new appObj();

    function appObj() {
      this.svgroot = null;
      this.describler = null;

      this.file = null;

      this.displayArea = document.getElementById( "display-area" );
      
      // views
      this.introView = document.getElementById( "intro" );
      this.imageView = document.getElementById( "image" );
      this.imageContent = document.querySelector("#image article");
      this.treeView = document.getElementById( "tree" );
      this.treeContent = document.querySelector("#tree article");
      this.codeView = document.getElementById( "code" );
      this.codeContent = document.querySelector("#code code");

      // controls
      this.downloadLink = document.getElementById( "download-button" );
      this.selectFileButton = document.getElementById( "select_file-button" );
      this.uploadFileButton = document.getElementById( "upload_file-button" );
      this.optionMenu = document.getElementById("menu_options");
      this.detailText = document.getElementById("details");
      this.previousButton = document.getElementById("previous_button");
      this.nextButton = document.getElementById("next_button");

      this.elIndex = 0;
      this.lang = "en-US";

      this.sampleList = [
        "aria-bar-chart.svg",
        "aria-pie-chart.svg",
        "barchart-labels.svg",
        "barchart-text-only.svg",
        "simple-car.svg"
      ];
   

      // constants
      this.svgns = "http://www.w3.org/2000/svg";
      this.xlinkns = "http://www.w3.org/1999/xlink";

      /*
      // initialize controls
      */

      // populate sample file list dropdown
      for(var i = 0; i < this.sampleList.length; i++) {
        var option = this.sampleList[i];
        var optionEl = document.createElement("option");
        optionEl.textContent = (i + 1) + ". " + option;
        optionEl.value = option;
        this.selectFileButton.appendChild(optionEl);
      }

      this.selectFileButton.addEventListener("change", bind(this, this.loadFileFromServer), false);
      this.uploadFileButton.addEventListener("change", bind(this, this.uploadFile), false);

      // populateOptions 
      this.optionMenu.addEventListener("change", bind(this, this.optionSelection), false);

      this.previousButton.addEventListener("click", bind(this, this.previous), false);
      this.nextButton.addEventListener("click", bind(this, this.next), false);

      window.location.hash = "#intro";
    }

    appObj.prototype.loadFileFromServer = function (){
      this.file = {
        "name": event.target.value
      }

      var xhr = new XMLHttpRequest;
      xhr.open("GET", "samples/" + this.file.name);
      xhr.onload = bind(this, this.insertFile);;
      // xhr.onload = this.insertFile;
      xhr.send()
    }

    appObj.prototype.uploadFile = function (event){
      this.file = event.target.files[0]; // FileList object

      // only allow SVG files
      if ("image/svg+xml" == this.file.type) {
        var reader = new FileReader();
        reader.readAsText(this.file);
        reader.onload = bind(this, this.insertFile);
      }
    }

    appObj.prototype.insertFile = function (event){
      // try to use FileReader file
      var svgContent = event.target.result;
      if ( !svgContent ) { 
        // otherwise use XHR file
        svgContent = event.target.response;
      }

      if ( svgContent ) { 
        var fileSize = (this.file.size ? this.byteSized( this.file.size ) : "n/a");
        var lastMod = (this.file.lastModifiedDate ? this.file.lastModifiedDate.toLocaleDateString() : "n/a");
        this.setFileInfo( this.file.name, fileSize, lastMod );

        // strip off XML prolog 
        var svgStart = svgContent.indexOf("<svg");
        var prolog = svgContent.substring(0, (svgStart - 1));
        svgContent = svgContent.substring( svgStart );
        
        // insert SVG file into HTML page
        this.imageContent.innerHTML = svgContent;
        this.svgroot = this.imageContent.firstElementChild;

        // set focus to SVG image
        this.svgroot.setAttribute("tabindex", "1");
        this.svgroot.focus();
        // console.log(document.activeElement)

        // switch to image view
        window.location.hash = "#image";


        // initialize download link
        this.createSaveLink( svgContent );
        // this.createSaveLink( this.imageContent.innerHTML );

        // optimizations
        this.setScalability( this.svgroot );
        
        this.lang = "en-US";
        var langAttr = this.svgroot.getAttribute("lang");
        if (langAttr) {
          this.lang = langAttr;
        }

        // write source code to code view
        this.writeSource();

        this.elIndex = 0;
        this.drawTree();

        // invoke screenreader
        this.describler = new describlerObj(this.svgroot); 

        this.describler.app = this;
      }
    }

    appObj.prototype.setFileInfo = function ( name, filesize, lastMod ){
        document.getElementById("file-name").innerHTML = "<strong title='last modified: " 
          + lastMod
          + "'>" + escape(name) + "</strong>";
        document.getElementById("filesize").textContent = filesize;
    } 

    appObj.prototype.createSaveLink = function ( svgContent ) {
      if ( svgContent && this.file ) {
        // uses HTML5 features: the ‘Blob’ object and the ‘download’ attribute of the <a> element 
        var blob = new Blob([ svgContent], {type:"image/svg+xml"});
        this.downloadLink.download = this.file.name.replace(".svg", "-svgax.svg");
        this.downloadLink.href = window.URL.createObjectURL(blob);

        document.getElementById("new-filesize").textContent = "(revised: " + this.byteSized( blob.size ) + ")";        
      }
    } 

    appObj.prototype.writeSource = function () {
      var code = document.createTextNode(this.imageContent.innerHTML);
      this.codeContent.replaceChild( code, this.codeContent.firstChild );
    } 

    appObj.prototype.drawTree = function ( el ) {
      var displayArea = document.getElementById( "display-area" );
      var str = this.elementToListItem( this.svgroot );
      this.treeContent.innerHTML = str;
      // svgEls = displayArea.querySelectorAll( "*" );            
    }

    appObj.prototype.elementToListItem = function ( el ) {
      var name = el.tagName;
      var namespace = el.nameSpace;


      var str = "<ul>";

      var id = el.getAttribute("id");
      var idStr = "";
      if ( id ) {
        // idStr = " <span class='id att' title='id attribute' contenteditable onblur='updateMetadata(this)'>" 
        //       + id + "</span>";
        idStr = " <span class='id att' title='id attribute'>" 
              + id + "</span>"; // temp
      }

      // check for 'title' or 'xlink:title' attribute, as on <a>
      var titleAtt = el.getAttribute("title");
      if (!titleAtt) {
        titleAtt = el.getAttributeNS(this.xlinkns, "title");
      }
      var titleAttStr = "";
      if ( titleAtt ) {
        // titleAttStr = " <span class='title att' title='title attribute' contenteditable onblur='updateMetadata(this)'>"
        //               + titleAtt + "</span>";
        titleAttStr = " <span class='title att' title='title attribute'>"
                      + titleAtt + "</span>"; //temp
      }
      
      // var contextStr = " onmousedown='contextMenu(event)' onmouseup='contextMenu(event)'";
      // var evtStr = " onmouseover='hilite(event)' onmouseout='lolite(event)'";
      var contextStr = ""; // temp
      var evtStr = ""; // temp
      
      if ( -1 != name.indexOf(":") ) {
        //elements in another namespace
        str += "<li data-el='" + this.elIndex + "'><span class='namespaced'" + contextStr + ">" + name + idStr + titleAttStr + "</span>";
      } else if ( "title" == name 
               || "desc" == name 
               || "text" == name 
               || "tspan" == name 
               || "textPath" == name  ) {
        // textual elements
        var text = "";
        if ( el.childNodes[0] ) {
          text = ( 1 == el.childNodes[0].nodeType ) ? "" : el.childNodes[0].textContent;
        }
        
        if (  "title" == name || "desc" == name ) {
          evtStr = "";
        }
        
        str += "<li data-el='" + this.elIndex + "'><span class='metadata'" + evtStr + contextStr + ">" + name + idStr + titleAttStr + "</span>";
        // str += "<span class='textvalue' contenteditable onblur='updateMetadata(this)'>" + text + "</span>";
        str += "<span class='textvalue' contenteditable>" + text + "</span>"; // temp
             
        // store current text for speech review
        // if ( "title" == name || "desc" == name || "text" == name ) {
        //   var elText = el.textContent;
        //   speechArray.push( elText );
        // }  
      } else if ( "path" == name 
               || "rect" == name 
               || "polygon" == name 
               || "polyline" == name  
               || "circle" == name 
               || "line" == name ) {
        // graphical and all other elements
        str += "<li data-el='" + this.elIndex + "'><span class='graphics'" + evtStr + contextStr + ">" + name + idStr + titleAttStr + "</span>";
      } else {
        // all other elements
        str += "<li data-el='" + this.elIndex + "'><span class='misc'" + contextStr + ">" + name + idStr + titleAttStr + "</span>";
      }
      
      if ( "title" != name && "desc" != name && -1 == name.indexOf(":") ) {
        var t = el.querySelector("title");
        if ( !t || el != t.parentNode ) { 
          // console.log( el.tagName + " doesn't have a <title>" )
          // str += "<span class='add-title' title='add title to this element' aria-role='button' onclick='addMetadata(this)'>+ &lt;title&gt;</span>";
          str += "<span class='add-title' title='add title to this element' aria-role='button'>+ &lt;title&gt;</span>"; // temp
        }     

        var d = el.querySelector("desc");
        if ( !d || el != d.parentNode ) { 
          // console.log( el.tagName + " doesn't have a <desc>" )
          // str += "<span class='add-desc' title='add description to this element' aria-role='button' onclick='addMetadata(this)'>+ &lt;desc&gt;</span>";
          str += "<span class='add-desc' title='add description to this element' aria-role='button'>+ &lt;desc&gt;</span>"; // temp
        }     
      } 
      
      this.elIndex++;
      
      // recursive function to find child or sibling elements
      var child = el.firstElementChild;
      if ( child ) {
        while ( child ) {
          str += this.elementToListItem( child )
          child = child.nextElementSibling;
        }
      }
      str += "</li></ul>";
      return str;
    }

    appObj.prototype.setScalability = function ( svgEl ) {
      var vb = svgEl.getAttribute("viewBox");
      
      var x = parseFloat( svgEl.getAttribute("x") );
      x = isNaN( x ) ? 0 : x;

      var y = parseFloat( svgEl.getAttribute("y") );
      y = isNaN( y ) ? 0 : y;
      
      var w = parseFloat( svgEl.getAttribute("width") );
      w = isNaN( w ) ? 0 : w;

      var h = parseFloat( svgEl.getAttribute("height") );
      h = isNaN( h ) ? 0 : h;

      var newVB = x + " " + y + " " + w + " " + h;
      if ( 0 == w || 0 == h ) {
        // if width and height not set, use bounding box of SVG contents
        var bbox = svgEl.getBBox();
        newVB = bbox.x + " " + bbox.y + " " + bbox.width + " " + bbox.height;
      }

      svgEl.setAttribute("width", "100%" );
      svgEl.setAttribute("height", "100%" );
      
      var vbArray = vb.split(" ");

      if ( !vb || ( w == vbArray[2] && h == vbArray[3] ) ) {
        svgEl.setAttribute("viewBox", newVB );
      }
    } 

    appObj.prototype.byteSized = function ( bytes ) {
      var units = ["bytes", "KB", "MB", "GB", "TB"];
      var size = ";"
      if ( 0 == bytes) {
        size = "0 Bytes"
      } else {
        var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
        if (0 == i) {
          size = bytes + " " + units[i];
        } else {
          size = (bytes / Math.pow(1024, i)).toFixed(1) + " " + units[i];;
        } 
      }
      return size;
    }
    
    appObj.prototype.optimize = function ( str, decimals ) {
      // str = str.replace()
      // \d+(\.\d)(\d)(\d+)
      
      // result = str.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
    }



    appObj.prototype.showText = function ( text ){
      this.detailText.value = text;
    }

    appObj.prototype.populateOptions = function ( options_array ){
      // console.log(options_array);
      while (this.optionMenu.firstChild) {
        this.optionMenu.removeChild(this.optionMenu.firstChild);
      }

      for (var c = 0, c_len = options_array.length; c_len > c; ++c) {
        var each_option = options_array[c];
        var new_option = document.createElement("option");
        new_option.value = each_option["id"];
        new_option.text = each_option["label"] + " (" + (c + 1) + ")";
        new_option.setAttribute( "data-type", each_option["type"] );
        this.optionMenu.appendChild(new_option);
      } 
      this.optionMenu.addEventListener("focus", function () { this.selectedIndex = -1; }, false);
    }

    appObj.prototype.optionSelection = function (event){
      // console.log(event.target.value);
      event.target.blur();
      var option = event.target.value;
      var type = event.target.getAttribute( "data-type" );
      this.describler.selectOption( option, type );
    }

    appObj.prototype.next = function (){
      event.target.blur();
      this.describler.navNext();
    }

    appObj.prototype.previous = function (){
      event.target.blur();
      this.describler.navPrev();
    }

    function bind (scope, fn) {
      return function () {
        return fn.apply( scope, arguments );
      }
    }

  </script>	
</head>
<body>

  <section id="app">
    <h1>Describler</h1>  
    <ul class="tabs">
      <li><a href="#intro">Intro</a></li>
      <li><a href="#image">Image</a></li>
      <!-- <li><a href="#tree">Editor</a></li> -->
      <li><a href="#code">Code</a></li>
    </ul>

    <section id="content"> 
      <section id="controls"> 
        <select id="select_file-button" class="upload button">
          <option>Select a file:</option>
        </select>
        <div class="upload button icon-upload">
            <span>Upload an SVG file…</span>
            <input type="file" id="upload_file-button" accept="image/svg+xml">
        </div>

        <section id="info">
          <output id="file-name"> </output>
          <output id="filesize"> </output>
          <output id="new-filesize"> </output>
        </section>

        <a id="download-button" class="button icon-download download" href="#"><span>Download…</span></a>     

        <div id="io">
          <textarea id="details" readonly>
            
          </textarea>

          <select id="menu_options">
          </select>
          <br>
          <button id="previous_button"><span>previous</span></button>
          <button id="next_button"><span>next</span></button>
        </div>


      </section>
    
      <main id="display-area">
        <section id="intro" class="tab-view">
          <article>
            <p><strong>Describler</strong> is an experimental prototype screen reader (audio browser for blind people) for SVG, and specifically SVG data visualizations.</p>

            <h2 id="screenreader">How do I use the Describler screen reader?</h2>
            <ol>
              <li>Load a file from the "Select a file" dropdown (I suggest loading the first file, <i>aria-bar-chart.svg</i>).</li>
              <li>Navigate to and through the dataviz by pressing the <code>tab</code> or arrow keys
                <ul>
                  <li><b>next item:</b> <code>tab</code> or <code>→</code> (right arrow)</li>
                  <li><b>previous item:</b> <code>shift</code>+<code>tab</code> or <code>←</code> (left arrow)</li>
                </ul>
              </li> 
              <li>For each item, a number of options for more information will be listed. Press the appropriate number key (<code>1</code>–<code>9</code>) for each option.</li>
            </ol>

            <p>To understand how Describler preserves context and lets the user truly explore the data visualization, try closing your eyes (if you're sighted), and moving back and forth through the datapoints.</p>

            <p>Alternately, you can use the controls on the left sidebar to navigate and choose options.</p>
            
            <h2 id="svg">What is SVG?</h2>
            <p>SVG stands for Scalable Vector Graphics, and it is a vector-based format, that can be created in popular drawing tools like Inkscape and Adobe Illustrator. Because each shape is made up of one or more markup elements, and the document has a DOM like HTML, it can be styled with CSS, and made interactive or animated with JavaScript.</p>
            <p>Like HTML, the text in SVG is simply text, and so screenreaders can read it. In addition to the visible text elements, like <code>&lt;text&gt;</code>,  <code>&lt;tspan&gt;</code>, and <code>&lt;textPath&gt;</code> elements, SVG has special metadata elements, <code>&lt;title&gt;</code> and <code>&lt;desc&gt;</code>, which allow you to annotate your shapes for mouseover tooltips and special screenreader descriptions.</p>

            <h2 id="sonification">What is sonfication?</h2>
            <p>Sonfication is a technique to represent signals or data patterns through sound. The most popular example is a Geiger counter.</p>
            <p>Describler has an experimental sonifier help the user understand the trend of the data visualization, by playing a tone that rises or falls the animated cursor runs along the trend line. You can activate this by pressing the <code>s</code> key to create the trend line, then the <code>p</code> key to "play" the tone.</a>

            <h2 id="authoring">How do I make accessible SVGs?</h2>
            <p>Coming soon…</p>

            <h2 id="notes">Notes</h2>
            <p>Describler is meant to add accessibility to SVG images, not to interactive SVG applications or GUIs; use ARIA markup for that.</p>
            <p>For more background on accessible SVG, see my <a href="http://schepers.cc/authoring-accessible-svg ‎">blog post</a>. Suggestions or code improvements are welcome! See the <a href="https://github.com/shepazu/describler">source on github</a>, where you can also check out some <a href="https://github.com/shepazu/describler/tree/gh-pages/samples">sample SVG files to play with.</a></p>
            <p>Thanks! <br>–<a id="sig" href="http://twitter.com/shepazu" target="_blank">Shepazu</a></p>
          </article>          
        </section>

        <section id="image" class="tab-view">
          <!-- <h2><a href="#image">Image</a></h2> -->
          <article tabindex="1"> </article>
        </section>

        <section id="tree" class="tree-view">
          <article> </article>
        </section>
<!-- 
 -->
        <section id="code" class="tab-view">
          <!-- <h2><a href="#code">Code</a></h2> -->
          <code>
          </code>
        </section>
      </main>

    </section>
  </section>

</body>
</html>
